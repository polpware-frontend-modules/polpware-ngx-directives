{"version":3,"file":"polpware-ngx-directives.umd.js","sources":["ng://@polpware/ngx-directives/lib/rest-window-height/rest-window-height.directive.ts","ng://@polpware/ngx-directives/lib/ngx-directives.module.ts"],"sourcesContent":["import { Directive, ElementRef, AfterViewInit, Input, HostListener } from '@angular/core';\n\nfunction findAncestorByClass(el, cls: string) {\n    while (el.parentElement) {\n        el = el.parentElement;\n        if (el.classList.contains(cls)) {\n            break;\n        }\n    }\n    return el;\n}\n\n/**\n * Defines a directive for setting the height of the element in question according \n * to a formula.\n * \n */\n@Directive({\n    selector: '[polpRestWindowHeight]'\n})\nexport class RestWindowHeightDirective implements AfterViewInit {\n\n    @Input() bottomOffset = 0;\n    @Input() minHeight = 0;\n    @Input() fixedHeight = 0;\n    @Input() maxHeight = 0;\n    @Input() topOffset = 0;\n    @Input() containerClass = '';\n\n    constructor(private el: ElementRef) { }\n\n    ngAfterViewInit() {\n        setTimeout(() => {\n            this.computeHeight();\n        });\n    }\n\n    @HostListener('window:resize', ['$event'])\n    onResize(event) {\n        setTimeout(() => {\n            this.computeHeight();\n        });\n    }\n\n    private computeHeight() {\n        const nativeElement = this.el.nativeElement;\n        // Case 1: fixed Height \n        if (this.fixedHeight) {\n            this.el.nativeElement.style.height = this.fixedHeight + 'px';\n            return;\n        }\n\n        let bodyRect: DOMRect;\n        if (this.containerClass) {\n            const p = findAncestorByClass(nativeElement, this.containerClass);\n            bodyRect = p.getBoundingClientRect();\n        } else {\n            bodyRect = document.body.getBoundingClientRect();\n        }\n\n        const elemRect = nativeElement.getBoundingClientRect();\n\n        const offset = elemRect.top - bodyRect.top;\n\n        const screenHeight = window.innerHeight;\n\n        let height = screenHeight - offset - this.bottomOffset - this.topOffset;\n\n        height = (height > this.minHeight) ? height : this.minHeight;\n\n        if (this.maxHeight) {\n            height = (height > this.maxHeight) ? this.maxHeight : height;\n        }\n\n        this.el.nativeElement.style.height = height + 'px';\n    }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { RestWindowHeightDirective } from './rest-window-height/rest-window-height.directive';\n\n@NgModule({\n    declarations: [\n        RestWindowHeightDirective],\n    imports: [\n    ],\n    exports: [RestWindowHeightDirective]\n})\nexport class PolpNgxDirectivesModule { }\n"],"names":["Directive","Input","HostListener","NgModule"],"mappings":";;;;;;IAEA,SAAS,mBAAmB,CAAC,EAAE,EAAE,GAAW;QACxC,OAAO,EAAE,CAAC,aAAa,EAAE;YACrB,EAAE,GAAG,EAAE,CAAC,aAAa,CAAC;YACtB,IAAI,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;gBAC5B,MAAM;aACT;SACJ;QACD,OAAO,EAAE,CAAC;IACd,CAAC;IAED;;;;;;QAiBI,mCAAoB,EAAc;YAAd,OAAE,GAAF,EAAE,CAAY;YAPzB,iBAAY,GAAG,CAAC,CAAC;YACjB,cAAS,GAAG,CAAC,CAAC;YACd,gBAAW,GAAG,CAAC,CAAC;YAChB,cAAS,GAAG,CAAC,CAAC;YACd,cAAS,GAAG,CAAC,CAAC;YACd,mBAAc,GAAG,EAAE,CAAC;SAEU;QAEvC,mDAAe,GAAf;YAAA,iBAIC;YAHG,UAAU,CAAC;gBACP,KAAI,CAAC,aAAa,EAAE,CAAC;aACxB,CAAC,CAAC;SACN;QAGD,4CAAQ,GADR,UACS,KAAK;YADd,iBAKC;YAHG,UAAU,CAAC;gBACP,KAAI,CAAC,aAAa,EAAE,CAAC;aACxB,CAAC,CAAC;SACN;QAEO,iDAAa,GAArB;YACI,IAAM,aAAa,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC;;YAE5C,IAAI,IAAI,CAAC,WAAW,EAAE;gBAClB,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBAC7D,OAAO;aACV;YAED,IAAI,QAAiB,CAAC;YACtB,IAAI,IAAI,CAAC,cAAc,EAAE;gBACrB,IAAM,CAAC,GAAG,mBAAmB,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;gBAClE,QAAQ,GAAG,CAAC,CAAC,qBAAqB,EAAE,CAAC;aACxC;iBAAM;gBACH,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC;aACpD;YAED,IAAM,QAAQ,GAAG,aAAa,CAAC,qBAAqB,EAAE,CAAC;YAEvD,IAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAC;YAE3C,IAAM,YAAY,GAAG,MAAM,CAAC,WAAW,CAAC;YAExC,IAAI,MAAM,GAAG,YAAY,GAAG,MAAM,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC;YAExE,MAAM,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC;YAE7D,IAAI,IAAI,CAAC,SAAS,EAAE;gBAChB,MAAM,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC;aAChE;YAED,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,GAAG,IAAI,CAAC;SACtD;0GAvDQ,yBAAyB;wEAAzB,yBAAyB;wHAAzB,oBAAgB;;wCApB7B;KAiBA,IA6DC;wDA1DY,yBAAyB;kBAHrCA,cAAS;mBAAC;oBACP,QAAQ,EAAE,wBAAwB;iBACrC;;sBAGIC,UAAK;;sBACLA,UAAK;;sBACLA,UAAK;;sBACLA,UAAK;;sBACLA,UAAK;;sBACLA,UAAK;;sBAULC,iBAAY;uBAAC,eAAe,EAAE,CAAC,QAAQ,CAAC;;;;QClC7C;SAOwC;qEAA3B,uBAAuB;uIAAvB,uBAAuB,kBAJvB,EACR;sCAPL;KAGA,IAOwC;8FAA3B,uBAAuB,mBAL5B,yBAAyB,aAGnB,yBAAyB;wDAE1B,uBAAuB;kBAPnCC,aAAQ;mBAAC;oBACN,YAAY,EAAE;wBACV,yBAAyB;qBAAC;oBAC9B,OAAO,EAAE,EACR;oBACD,OAAO,EAAE,CAAC,yBAAyB,CAAC;iBACvC;;;;;;;;;;;;;;"}